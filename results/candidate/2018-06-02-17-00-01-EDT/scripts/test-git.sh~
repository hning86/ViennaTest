set -x 

ENV_NAME="$1"
export PATH=/home/ninghai/miniconda3/envs/$ENV_NAME/bin:$PATH

pwd
git remote -v
git branch --list

if [ "$ENV_NAME" = "daily" ] ; then
    echo "daily"
    # use eastus2euap workspace for daily
    cp aml_config/config.haieastus2euapws.json aml_config/config.json
    # use daily branch test code
    git stash
    echo "git checkout daily"
    git checkout daily
    git pull
elif [ "$ENV_NAME" = "candidate" ] ; then
    echo "candidate"
    # use eastus2 workspace
    cp aml_config/config.haieastus2ws3.json aml_config/config.json
    # use candidate branch for test code
    git stash
    echo "git checkout candidate"
    git checkout candidate
    git pull
else # preview
    echo "preview"
    # use eastus2 workspace for preview
    cp aml_config/config.haieastus2ws3.json aml_config/config.json
    # user master branch for test code
    git stash
    echo "git checkout master"
    git checkout master
    git pull
fi

git status
git branch --list
