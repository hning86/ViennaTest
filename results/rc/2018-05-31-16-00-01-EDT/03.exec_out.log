###################################
START AT: 2018-05-31-16:01:40
###################################


##### 01.interactive.e2e.py (2018-05-31-16:01:40) ######
Azure ML Core SDK Version: 0.1.0.954785
Workspace details:
aml-notebooks haieastus2ws3 eastus2
start sequential parameter sweep...
try alpha value of 0.00
try alpha value of 0.05
try alpha value of 0.10
try alpha value of 0.15
try alpha value of 0.20
try alpha value of 0.25
try alpha value of 0.30
try alpha value of 0.35
try alpha value of 0.40
try alpha value of 0.45
try alpha value of 0.50
try alpha value of 0.55
try alpha value of 0.60
try alpha value of 0.65
try alpha value of 0.70
try alpha value of 0.75
try alpha value of 0.80
try alpha value of 0.85
try alpha value of 0.90
try alpha value of 0.95
Find the best run.
Best run is: 0be63929-948a-4da4-84ab-5e116b5aa778
Metrics: {'alpha': 0.4, 'mse': 3295.741064355809, 'columns': ['age', 'gender', 'bmi', 'bp', 's1', 's2', 's3', 's4', 's5', 's6']}
Run history url:
https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-01/run-history/run-details/0be63929-948a-4da4-84ab-5e116b5aa778
plot mse_over_alpha.png
upload mse_over_alpha.png.
deploying to ACI...
Registering model: best_model.pkl
Creating image
Image creation operation finished for image rrs01:15, operation "Succeeded"
Creating service
ACI service creation operation finished, operation "Succeeded"
test the web service.
{"result": [217.67978776218717, 224.78937091757172, 163.3196311066946, 125.1273401431565, 169.90947633176765, 228.5134871431722, 116.72451334033745, 182.98787464375403, 144.67889653294637, 204.44059121904507]}
delete ACI


##### 02.local.py (2018-05-31-16:09:21) ################
Azure ML Core SDK Version: 0.1.0.954785
Workspace details:
aml-notebooks haieastus2ws3 eastus2
/tmp/e2e-test/02 already exists, remove it.
/tmp/e2e-test/02
e2e-02
copy train-sklearn.py to the project folder.
load run config

##################################################
submitting train-sklearn.py for a local run...
##################################################

https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-02/run-history/run-details/e2e-02_1527797365
RunId: e2e-02_1527797365

Streaming azureml-logs/60_control_log.txt
=========================================

Uploading experiment status to history service.
Adding run profile attachment azureml-logs/60_control_log.txt
Running: ['python', 'azureml-setup/run_script.py', 'python', 'azureml-setup/context_manager_injector.py', '-i', 'OutputCollection:context_managers.RunHistory', 'train-sklearn.py']
Logging experiment running status in history service.
Uploading experiment status to history service.
Adding run profile attachment azureml-logs/80_driver_log.txt

Streaming azureml-logs/80_driver_log.txt
========================================

alpha is 0.00, and mse is 3424.32
alpha is 0.05, and mse is 3408.92
alpha is 0.10, and mse is 3372.65
alpha is 0.15, and mse is 3345.15
alpha is 0.20, and mse is 3325.29
alpha is 0.25, and mse is 3311.56
alpha is 0.30, and mse is 3302.67
alpha is 0.35, and mse is 3297.66
alpha is 0.40, and mse is 3295.74
alpha is 0.45, and mse is 3296.32
alpha is 0.50, and mse is 3298.91
alpha is 0.55, and mse is 3303.14
alpha is 0.60, and mse is 3308.70
alpha is 0.65, and mse is 3315.36
alpha is 0.70, and mse is 3322.90
alpha is 0.75, and mse is 3331.17
alpha is 0.80, and mse is 3340.02
alpha is 0.85, and mse is 3349.36
alpha is 0.90, and mse is 3359.09
alpha is 0.95, and mse is 3369.13
The experiment completed successfully. Starting post-processing steps.

Execution Summary
=================
RunId: e2e-02_1527797365


##################################################
Submitting train-sklearn.py for a local conda run...
##################################################

https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-02/run-history/run-details/e2e-02_1527797381
RunId: e2e-02_1527797381

Streaming azureml-logs/80_driver_log.txt
========================================

alpha is 0.00, and mse is 3424.32
alpha is 0.05, and mse is 3408.92
alpha is 0.10, and mse is 3372.65
alpha is 0.15, and mse is 3345.15
alpha is 0.20, and mse is 3325.29
alpha is 0.25, and mse is 3311.56
alpha is 0.30, and mse is 3302.67
alpha is 0.35, and mse is 3297.66
alpha is 0.40, and mse is 3295.74
alpha is 0.45, and mse is 3296.32
alpha is 0.50, and mse is 3298.91
alpha is 0.55, and mse is 3303.14
alpha is 0.60, and mse is 3308.70
alpha is 0.65, and mse is 3315.36
alpha is 0.70, and mse is 3322.90
alpha is 0.75, and mse is 3331.17
alpha is 0.80, and mse is 3340.02
alpha is 0.85, and mse is 3349.36
alpha is 0.90, and mse is 3359.09
alpha is 0.95, and mse is 3369.13
The experiment completed successfully. Starting post-processing steps.

Execution Summary
=================
RunId: e2e-02_1527797381

When alpha is 0.40, we have min MSE 3295.74.


##### 03.aci.py (2018-05-31-16:09:59) ##################
Azure ML Core SDK Version: 0.1.0.954785
Workspace details:
aml-notebooks haieastus2ws3 eastus2
/tmp/e2e-test/03 already exists, remove it.
/tmp/e2e-test/03
e2e-03
copy train-sklearn.py to the project folder.

##################################################
ACI run...
##################################################

Create a run config object for ACI
base image is continuumio/miniconda3:4.4.10
submitting run...
https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-03/run-history/run-details/e2e-03_1527797407754
RunId: e2e-03_1527797407754

Streaming azureml-logs/20_ice_log.txt
=====================================


Execution Summary
=================
RunId: e2e-03_1527797407754



##### 04.dsvm (2018-05-31-16:12:12) ####################
Azure ML Core SDK Version: 0.1.0.954785
Workspace details:
aml-notebooks haieastus2ws3 eastus2
/tmp/e2e-test/04 already exists, remove it.
/tmp/e2e-test/04
e2e-04
copy train-sklearn.py to the project folder.

##################################################
Bare VM run
##################################################

Load the cpu-dsvm config from aml_config directory...
submit run...
https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-04/run-history/run-details/e2e-04_1527797537389
RunId: e2e-04_1527797537389

Streaming azureml-logs/80_driver_log.txt
========================================

alpha is 0.00, and mse is 3424.32
alpha is 0.05, and mse is 3408.92
alpha is 0.10, and mse is 3372.65
alpha is 0.15, and mse is 3345.15
alpha is 0.20, and mse is 3325.29
alpha is 0.25, and mse is 3311.56
alpha is 0.30, and mse is 3302.67
alpha is 0.35, and mse is 3297.66
alpha is 0.40, and mse is 3295.74
alpha is 0.45, and mse is 3296.32
alpha is 0.50, and mse is 3298.91
alpha is 0.55, and mse is 3303.14
alpha is 0.60, and mse is 3308.70
alpha is 0.65, and mse is 3315.36
alpha is 0.70, and mse is 3322.90
alpha is 0.75, and mse is 3331.17
alpha is 0.80, and mse is 3340.02
alpha is 0.85, and mse is 3349.36
alpha is 0.90, and mse is 3359.09
alpha is 0.95, and mse is 3369.13
The experiment completed successfully. Starting post-processing steps.

Execution Summary
=================
RunId: e2e-04_1527797537389


##################################################
DSVM Docker run...
##################################################

Load cpu-dsvm run config and make it to use Docker.
Base Docker image is: continuumio/miniconda3:4.4.10
submitting run...
https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-04/run-history/run-details/e2e-04_1527797549638
RunId: e2e-04_1527797549638

Streaming azureml-logs/80_driver_log.txt
========================================

alpha is 0.00, and mse is 3424.32
alpha is 0.05, and mse is 3408.92
alpha is 0.10, and mse is 3372.65
alpha is 0.15, and mse is 3345.15
alpha is 0.20, and mse is 3325.29
alpha is 0.25, and mse is 3311.56
alpha is 0.30, and mse is 3302.67
alpha is 0.35, and mse is 3297.66
alpha is 0.40, and mse is 3295.74
alpha is 0.45, and mse is 3296.32
alpha is 0.50, and mse is 3298.91
alpha is 0.55, and mse is 3303.14
alpha is 0.60, and mse is 3308.70
alpha is 0.65, and mse is 3315.36
alpha is 0.70, and mse is 3322.90
alpha is 0.75, and mse is 3331.17
alpha is 0.80, and mse is 3340.02
alpha is 0.85, and mse is 3349.36
alpha is 0.90, and mse is 3359.09
alpha is 0.95, and mse is 3369.13
The experiment completed successfully. Starting post-processing steps.

Execution Summary
=================
RunId: e2e-04_1527797549638

load cpu-dsvm run config and make it use a custom Docker image.
base image: ninghai/azureml:0.3

##################################################
submitting train-sklearn.py for a Custom Docker run on VM...
##################################################

https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-04/run-history/run-details/e2e-04_1527797569035
RunId: e2e-04_1527797569035

Streaming azureml-logs/80_driver_log.txt
========================================

alpha is 0.00, and mse is 3424.32
alpha is 0.05, and mse is 3408.92
alpha is 0.10, and mse is 3372.65
alpha is 0.15, and mse is 3345.15
alpha is 0.20, and mse is 3325.29
alpha is 0.25, and mse is 3311.56
alpha is 0.30, and mse is 3302.67
alpha is 0.35, and mse is 3297.66
alpha is 0.40, and mse is 3295.74
alpha is 0.45, and mse is 3296.32
alpha is 0.50, and mse is 3298.91
alpha is 0.55, and mse is 3303.14
alpha is 0.60, and mse is 3308.70
alpha is 0.65, and mse is 3315.36
alpha is 0.70, and mse is 3322.90
alpha is 0.75, and mse is 3331.17
alpha is 0.80, and mse is 3340.02
alpha is 0.85, and mse is 3349.36
alpha is 0.90, and mse is 3359.09
alpha is 0.95, and mse is 3369.13
The experiment completed successfully. Starting post-processing steps.

Execution Summary
=================
RunId: e2e-04_1527797569035

When alpha is 0.40, we have min MSE 3295.74.


##### 05.spark (2018-05-31-16:13:20) ###################
Azure ML Core SDK Version: 0.1.0.954785
Workspace details:
aml-notebooks haieastus2ws3 eastus2
/tmp/e2e-test/05 already exists, remove it.
/tmp/e2e-test/05
e2e-05
copy train-spark.py and iris.csv to the project folder.
create an ACI run config.
base image is microsoft/mmlspark:0.12

##################################################
submitting train-spark.py for a Spark run on ACI...
##################################################



##### 07.sklearn.hd.py (2018-05-31-16:13:41) ###########
Azure ML Core SDK Version: 0.1.0.954785
Workspace details:
aml-notebooks haieastus2ws3 eastus2
/tmp/e2e-test/07 already exists, remove it.
/tmp/e2e-test/07
e2e-07
copy train-sklearn-one-model.py to the project folder.
create or load BatchAI compute cpucluster...
gpucluster BatchAI
cpucluster BatchAI
found compute target. just use it.
create generic estimator.

##################################################
Batch AI run...
##################################################

https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-07/run-history/run-details/e2e-07_1527797627511
RunId: e2e-07_1527797627511

Streaming azureml-logs/20_ice_log.txt
=====================================


Streaming azureml-logs/80_driver_log.txt
========================================

alpha value is: 0.1
Ridget model fitted.
Mean Squared Error is: 3372.6496278100326
The experiment completed successfully. Starting post-processing steps.

Execution Summary
=================
RunId: e2e-07_1527797627511

configure hyperdrive.

##################################################
Hyperdrive run on Batch AI...
##################################################

https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-07/run-history/run-details/e2e-07_1527797673329


##### 08.tf.hd.py (2018-05-31-16:14:34) ################
Azure ML Core SDK Version: 0.1.0.954785
Workspace details:
aml-notebooks haieastus2ws3 eastus2
/tmp/e2e-test/08 already exists, remove it.
/tmp/e2e-test/08
e2e-08
copy mnist_tf.py to the project folder.
create or load BatchAI compute gpucluster...
gpucluster BatchAI
found compute target. just use it.
create TensorFlow estimator.

##################################################
submitting mnist_tf.py for a Batch AI run...
##################################################

https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-08/run-history/run-details/e2e-08_1527797678295
RunId: e2e-08_1527797678295

Streaming azureml-logs/20_ice_log.txt
=====================================


Streaming azureml-logs/80_driver_log.txt
========================================

Using Spark's default log4j profile: org/apache/spark/log4j-defaults.properties
Setting default log level to "WARN".
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).
18/05/31 20:22:42 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
data path: /tmp
fetching MNIST data...
MNIST dataset downloaded.
MNIST dataset loaded in memory.
X:  (70000, 784)
y:  (70000,)
labels:  [0. 1. 2. 3. 4. 5. 6. 7. 8. 9.]
training a tensorflow model...
(55000, 784) (55000,)
batch_size: 50
n_batches: 1100
first layer neurons: 300
second layer neurons: 100
2018-05-31 20:22:47.957665: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA
2018-05-31 20:22:48.175530: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: b2a7:00:00.0
totalMemory: 11.17GiB freeMemory: 11.09GiB
2018-05-31 20:22:48.175574: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1435] Adding visible gpu devices: 0
2018-05-31 20:22:48.491151: I tensorflow/core/common_runtime/gpu/gpu_device.cc:923] Device interconnect StreamExecutor with strength 1 edge matrix:
2018-05-31 20:22:48.491206: I tensorflow/core/common_runtime/gpu/gpu_device.cc:929]      0 
2018-05-31 20:22:48.491223: I tensorflow/core/common_runtime/gpu/gpu_device.cc:942] 0:   N 
2018-05-31 20:22:48.491485: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1053] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10755 MB memory) -> physical GPU (device: 0, name: Tesla K80, pci bus id: b2a7:00:00.0, compute capability: 3.7)
0 Train accuracy: 0.8948727 , Val accuracy; 0.8968667
1 Train accuracy: 0.9156182 , Val accuracy; 0.9162
2 Train accuracy: 0.9269818 , Val accuracy; 0.9248
3 Train accuracy: 0.9351636 , Val accuracy; 0.93326664
4 Train accuracy: 0.9421273 , Val accuracy; 0.9388667
5 Train accuracy: 0.9475091 , Val accuracy; 0.9436
6 Train accuracy: 0.9509818 , Val accuracy; 0.9464
7 Train accuracy: 0.9548182 , Val accuracy; 0.94946665
8 Train accuracy: 0.9584909 , Val accuracy; 0.95213336
9 Train accuracy: 0.9611818 , Val accuracy; 0.9550667
10 Train accuracy: 0.9636545 , Val accuracy; 0.95786667
11 Train accuracy: 0.9647818 , Val accuracy; 0.9584
12 Train accuracy: 0.9678 , Val accuracy; 0.959
13 Train accuracy: 0.9700364 , Val accuracy; 0.96246666
14 Train accuracy: 0.97007275 , Val accuracy; 0.9618667
15 Train accuracy: 0.9728 , Val accuracy; 0.9636667
16 Train accuracy: 0.9741455 , Val accuracy; 0.9654
17 Train accuracy: 0.97418183 , Val accuracy; 0.9650667
18 Train accuracy: 0.9770909 , Val accuracy; 0.96706665
19 Train accuracy: 0.97670907 , Val accuracy; 0.96646667
20 Train accuracy: 0.9791273 , Val accuracy; 0.96793336
21 Train accuracy: 0.9806909 , Val accuracy; 0.9686
22 Train accuracy: 0.98114544 , Val accuracy; 0.9695333
23 Train accuracy: 0.98205453 , Val accuracy; 0.97006667
24 Train accuracy: 0.9831091 , Val accuracy; 0.9701333
Overall accuracy: 0.9701333333333333
Confusion matrix:
[[1403    0    3    2    0    6    7    2    8   10]
 [   0 1658    8    1    1    0    2    3    2    1]
 [   5   10 1456    6    1    1    1    7    9    1]
 [   1    1   11 1504    0   17    1    5    6    2]
 [   4    2    4    0 1382    0    5    4    2   31]
 [   5    3    4   22    4 1316    8    1   12   12]
 [  10    3    5    0    5    8 1462    0    7    0]
 [   2    5   11    2    5    1    1 1528    3   16]
 [   4   10    3   13    3    9    0    1 1432    8]
 [   4    3    1   10    9    3    0    9   10 1411]]
The experiment completed successfully. Starting post-processing steps.

Execution Summary
=================
RunId: e2e-08_1527797678295

configure hyperdrive.

##################################################
submitting mnist_tf.py for a hyperdrive run on Batch AI...
##################################################

https://mlworkspace.azureml-test.net/home/%2Fsubscriptions%2Ffac34303-435d-4486-8c3f-7094d82a0b60%2FresourceGroups%2Faml-notebooks%2Fproviders%2FMicrosoft.MachineLearningServices%2Fworkspaces%2Fhaieastus2ws3/projects/e2e-08/run-history/run-details/e2e-08_1527798236191


##### 10.o16n.py () #################
Azure ML Core SDK Version: 0.1.0.954785
Workspace details:
aml-notebooks haieastus2ws3 eastus2
Registering model: mymodel
Name: mymodel 	Version: 20 	Description: Ridge regression model to predict diabetes ['diabetes', 'regression']
Name: mymodel 	Version: 19 	Description: Ridge regression model to predict diabetes ['diabetes', 'regression']
Name: mymodel 	Version: 18 	Description: Ridge regression model to predict diabetes ['diabetes', 'regression']
Name: mymodel 	Version: 17 	Description: Ridge regression model to predict diabetes ['diabetes', 'regression']
Name: mymodel 	Version: 16 	Description: Ridge regression model to predict diabetes ['diabetes', 'regression']
Name: mymodel 	Version: 15 	Description: Ridge regression model to predict diabetes ['diabetes', 'regression']
Name: mymodel 	Version: 14 	Description: Ridge regression model to predict diabetes ['diabetes', 'regression']


###################################
########### END AT 2018-05-31-16:23:59
###################################
